Filtered squarewave generation using cosine waves on slopes